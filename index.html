<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="description" content="Free Web tutorials">
    <meta name="keywords" content="HTML, CSS, JavaScript">
    <meta name="author" content="John Doe">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/bootstrap.min.css">
    <link rel="stylesheet" href="./css/bootstrap.css">
    <link rel="stylesheet" href="./css/common-css.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/agate.min.css">
    <link rel="stylesheet" href="./header/header.css">
    <style>

    </style>
</head>

<body>
    <!-- <nav class="nav" id="header"></nav> -->

    <div class="container-fluid">
        <h1><a href="./pages/index.html">Home</a></h1>
        <button onclick="uploadData()">upload</button>

    </div>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://requirejs.org/docs/release/2.3.5/minified/require.js"></script>
    <script src="./pages/main.js"></script>
    <!-- <script src="./notes-data/home-notes.js"></script> -->
    <script src="./header/header.js"></script>

    <script>
        // mainDom(commonData.commonNote)

        function uploadData() {
            const fs = require("fs");
            let usersjson = fs.readFileSync("db.json", "utf-8");
            console.log(usersjson)
            // let users = JSON.parse(usersjson);
            // users.push(obj);
            // usersjson = JSON.stringify(users);
            // fs.writeFileSync("db.json",usersjson,"utf-8");
        }


        function fetchJSONData() {
            fetch("./db/db.json")
                .then((res) => {
                    if (!res.ok) {
                        throw new Error
                            (`HTTP error! Status: ${res.status}`);
                    }
                    return res.json();
                })
                .then((data) =>
                    console.log(data))
                .catch((error) =>
                    console.error("Unable to fetch data:", error));
        }
        fetchJSONData();

        //-----------------------

        const newProduct = {
            id: 1017,
            description: 'New Phone Z',
            price: 433
        }

        // a POST request
        const response = fetch('./db/db.json', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json; charset=utf-8'
            },
            body: JSON.stringify(newProduct)
        })

        console.log('status:', response.status)

    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <!-- and it's easy to individually load additional languages -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/go.min.js"></script>
    <script>hljs.highlightAll();</script>
    <script>hljs.highlightElement();</script>
</body>

</html>